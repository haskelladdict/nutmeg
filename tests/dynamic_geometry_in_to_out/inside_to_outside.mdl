ITERATIONS = 10
TIME_STEP = 1e-6

WARNINGS
{
  LARGE_MOLECULAR_DISPLACEMENT = IGNORED
}

DYNAMIC_GEOMETRY = "./list_of_geometry.txt"

DEFINE_MOLECULES
{
  vm_1 { DIFFUSION_CONSTANT_3D = 1e-08 }
  vm_2 { DIFFUSION_CONSTANT_3D = 1e-08 }
  vm_3 { DIFFUSION_CONSTANT_3D = 1e-08 }
  vm_4 { DIFFUSION_CONSTANT_3D = 1e-08 }
}

INCLUDE_FILE = "./geom_1.mdl"

DEFINE_SURFACE_CLASSES
{
  transp_vm_2_3_4
  {
    TRANSPARENT = vm_2,
    TRANSPARENT = vm_3,
    TRANSPARENT = vm_4,
  }
  transp_vm_3_4
  {
    TRANSPARENT = vm_3,
    TRANSPARENT = vm_4,
  }
  transp_vm_4
  {
    TRANSPARENT = vm_4,
  }
}

// Block vm_1 from even leaving inner cube (A)
// Block vm_2 from leaving middle cube (B)
// Block vm_3 from leaving outer cube (C)
// Let vm_4 pass through everything
MODIFY_SURFACE_REGIONS
{
  A[ALL]
  {
    SURFACE_CLASS = transp_vm_2_3_4
  }
  B[ALL]
  {
    SURFACE_CLASS = transp_vm_3_4
  }
  C[ALL]
  {
    SURFACE_CLASS = transp_vm_4
  }
}

INSTANTIATE Scene OBJECT
{
  A OBJECT A{}
  B OBJECT B{}
  C OBJECT C{}
  rel_vm_1 RELEASE_SITE
  {
    SHAPE = CUBIC
    MOLECULE = vm_1
    NUMBER_TO_RELEASE = 100
    SITE_DIAMETER = 0.0
    LOCATION = [0.0, 0.0, 0.0]
  }
  rel_vm_2 RELEASE_SITE
  {
    SHAPE = CUBIC
    MOLECULE = vm_2
    NUMBER_TO_RELEASE = 100
    SITE_DIAMETER = 0.0
    LOCATION = [0.0, 0.0, 0.0]
  }
  rel_vm_3 RELEASE_SITE
  {
    SHAPE = CUBIC
    MOLECULE = vm_3
    NUMBER_TO_RELEASE = 100
    SITE_DIAMETER = 0.0
    LOCATION = [0.0, 0.0, 0.0]
  }
  rel_vm_4 RELEASE_SITE
  {
    SHAPE = CUBIC
    MOLECULE = vm_4
    NUMBER_TO_RELEASE = 100
    SITE_DIAMETER = 0.0
    LOCATION = [0.0, 0.0, 0.0]
  }
}

REACTION_DATA_OUTPUT
{
  STEP=1e-06
  HEADER=OFF
  // vm_1
  {COUNT[vm_1,Scene.A]:"A",
   COUNT[vm_1,Scene.B]-COUNT[vm_1,Scene.A]:"B",
   COUNT[vm_1,Scene.C]-COUNT[vm_1,Scene.B]:"C",
   COUNT[vm_1,WORLD]-COUNT[vm_1,Scene.C]:"WORLD"}=> "./vm_1.dat"
  // vm_2
  {COUNT[vm_2,Scene.A]:"A",
   COUNT[vm_2,Scene.B]-COUNT[vm_2,Scene.A]:"B",
   COUNT[vm_2,Scene.C]-COUNT[vm_2,Scene.B]:"C",
   COUNT[vm_2,WORLD]-COUNT[vm_2,Scene.C]:"WORLD"}=> "./vm_2.dat"
  // vm_3
  {COUNT[vm_3,Scene.A]:"A",
   COUNT[vm_3,Scene.B]-COUNT[vm_3,Scene.A]:"B",
   COUNT[vm_3,Scene.C]-COUNT[vm_3,Scene.B]:"C",
   COUNT[vm_3,WORLD]-COUNT[vm_3,Scene.C]:"WORLD"}=> "./vm_3.dat"
  // vm_4
  {COUNT[vm_4,Scene.A]:"A",
   COUNT[vm_4,Scene.B]-COUNT[vm_4,Scene.A]:"B",
   COUNT[vm_4,Scene.C]-COUNT[vm_4,Scene.B]:"C",
   COUNT[vm_4,WORLD]-COUNT[vm_4,Scene.C]:"WORLD"}=> "./vm_4.dat"
}

/*VIZ_OUTPUT*/
/*{*/
/*  MODE = CELLBLENDER*/
/*  FILENAME = "./viz_data/Scene"*/
/*  MOLECULES*/
/*  {*/
/*    NAME_LIST {ALL_MOLECULES}*/
/*    ITERATION_NUMBERS {ALL_DATA @ ALL_ITERATIONS}*/
/*  }*/
/*}*/
